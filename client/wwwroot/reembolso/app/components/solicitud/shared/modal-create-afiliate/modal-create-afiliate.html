<section class="g-page-popup g-reembolso-popup">
  <button type="button" class="close g-close-modal" ng-click="$ctrl.cerrar()">
    <span class=" ico-mapfre_231_cancelaroff"></span>
  </button>
  <form name="$ctrl.frmModal">
    <div class="container g-modal-header g-text-uppercase">
      <div class="col-xs-12">
        <div class="row">
          <div class="col-md-12 mb-xs-1">
            <h2 class="gH3"><b>REGISTRAR NUEVO {{ $ctrl.namelbl }}</b></h2>
          </div>
        </div>
      </div>
    </div>
    <div class="container g-modal-body pt-xs-2 pb-xs-2">
      <div class="col-xs-12">
        <div class="row">
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Tipo de documento', required: true}"
              name="nDocumentType"
              ng-model="$ctrl.beneficiary.documentType"
              m-data-source="$ctrl.documentTypeList"
              text-field="description"
              value-field="idDocumentType"
              ng-required="true"
              ng-change="$ctrl.showNaturalPerson($ctrl.beneficiary.documentType)"
              m-Empty-Option="{enterData:true}">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.$ctrl.frmModal.nDocumentType.$error.required && !$ctrl.frmModal.nDocumentType.$pristine">
              * Campo requerido
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-input
              label="{label: 'Número de documento ', required: true}"
              name="nDocumentNumber"
              mpf-validation="onlyNumber"
              ng-maxlength="$ctrl.docNumMaxLength"
              ng-minlength="$ctrl.docNumMaxLength"
              ng-model="$ctrl.beneficiary.documentNumber"
              ng-required="true">
            </mpf-input>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nDocumentNumber.$error.required && !$ctrl.frmModal.nDocumentNumber.$pristine">
              * Campo requerido
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-input
              label="{label: 'Apellido paterno ', required: true}"
              name="nLastName"
              ng-model="$ctrl.beneficiary.lastName"
              mpf-validation="onlyLetter"
              ng-Minlength="1"
              ng-Maxlength="50"
              ng-required="true">
            </mpf-input>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nLastName.$error.required && !$ctrl.frmModal.nLastName.$pristine">
              * Campo requerido
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-input
              label="{label: 'Apellido materno ', required: true}"
              name="nMotherLastName"
              ng-model="$ctrl.beneficiary.motherLastName"
              mpf-validation="onlyLetter"
              ng-Minlength="1"
              ng-Maxlength="50"
              ng-required="true">
            </mpf-input>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nMotherLastName.$error.required && !$ctrl.frmModal.nMotherLastName.$pristine">
              * Campo requerido
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-input
              label="{label: 'Primer Nombre ', required: true}"
              name="nFirstName"
              ng-model="$ctrl.beneficiary.firstName"
              mpf-validation="onlyLetter"
              ng-Minlength="1"
              ng-Maxlength="50"
              ng-required="true">
            </mpf-input>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nFirstName.$error.required && !$ctrl.frmModal.nFirstName.$pristine">
              * Campo requerido
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-input
              label="{label: 'Segundo Nombre ', required: false}"
              name="nSecondName"
              ng-model="$ctrl.beneficiary.secondName"
              mpf-validation="onlyLetter"
              ng-Minlength="1"
              ng-Maxlength="50"
              ng-required="false">
            </mpf-input>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nSecondName.$error.required && !$ctrl.frmModal.nSecondName.$pristine">
              * Campo requerido
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <div class="input-group g-date-picker">
              <label class="g-placeholder animated">Fecha de Nacimiento <span></span>*</label>
              <input
                type="text"
                class="form-control"
                name="nFechaNacimiento"
                ng-model="$ctrl.beneficiary.birthdate.model"
                uib-datepicker-popup="{{$ctrl.beneficiary.birthdate.FORMAT_DATE}}"
                is-open="$ctrl.beneficiary.birthdate.open"
                datepicker-options="$ctrl.beneficiary.birthdate.options"
                close-text="Close"
                alt-input-formats="$ctrl.beneficiary.birthdate.ALT_INPUT_FORMATS"
                ui-mask="{{$ctrl.beneficiary.birthdate.FORMAT_MASK}}"
                ng-pattern="$ctrl.beneficiary.birthdate.FORMAT_PATTERN"
                model-view-value="true"
                ng-required="true"
                ng-disabled="false"
                ng-change=""/>
              <span class="input-group-btn">
                <button
                  type="button"
                  class="btn btn-default"
                  ng-disabled = "false"
                  ng-click="$ctrl.beneficiary.birthdate.setOpen(true)">
                  <i class="glyphicon glyphicon-calendar"></i>
                </button>
              </span>
            </div>
            <ul class="g-error">
              <li ng-show="!$ctrl.frmModal.nFechaNacimiento.$error.required && $ctrl.frmModal.nFechaNacimiento.$invalid && !$ctrl.frmModal.nFechaNacimiento.$pristine">* Fecha incorrecta</li>
              <li ng-show="$ctrl.frmModal.nFechaNacimiento.$error.required && !$ctrl.frmModal.nFechaNacimiento.$pristine">* Este campo es necesario</li>
            </ul>
          </div>
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Sexo', required: true}"
              name="nSex"
              ng-model="$ctrl.beneficiary.sex"
              m-data-source="$ctrl.sexList"
              text-field="valueField"
              value-field="codeField"
              ng-required="true"
              m-Empty-Option="{enterData:true}">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nSex.$error.required && !$ctrl.frmModal.nSex.$pristine">
              * Seleccione un sexo
            </div>
          </div>
        </div>
        <div class="row" ng-if="$ctrl.isSoat">
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Beneficio ', required: true}"
              name="nBeneficio"
              ng-model="$ctrl.beneficiary.benefit"
              m-data-source="$ctrl.benefitList"
              text-field="description"
              value-field="code"
              ng-required="true"
              m-Empty-Option="{enterData:true}">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nBeneficio.$error.required && !$ctrl.frmModal.nBeneficio.$pristine">
              * Seleccione un beneficio
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Tipo de lesión ', required: true}"
              name="nInjuryType"
              ng-model="$ctrl.beneficiary.injuryType"
              m-data-source="$ctrl.injuryTypeList"
              text-field="valueField"
              value-field="codeField"
              ng-required="true"
              m-Empty-Option="{enterData:true}">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nInjuryType.$error.required && !$ctrl.frmModal.nInjuryType.$pristine">
              * Seleccione un tipo de lesión
            </div>
          </div>
        </div>
        <div class="row" ng-if="$ctrl.isSoat">
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Tipo de lesionado ', required: true}"
              name="nInjuredType"
              ng-model="$ctrl.beneficiary.injuredType"
              m-data-source="$ctrl.injuredTypeList"
              text-field="valueField"
              value-field="codeField"
              ng-required="true"
              m-Empty-Option="{enterData:true}">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nInjuredType.$error.required && !$ctrl.frmModal.nInjuredType.$pristine">
              * Seleccione un tipo de lesionado
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Departamento', required: true}"
              name="nDepartment"
              ng-model="$ctrl.beneficiary.department"
              m-data-source="$ctrl.departmentList"
              text-field="departmentName"
              value-field="departmentCode"
              ng-required="true"
              m-Empty-Option="{enterData:true}"
              ng-change="$ctrl.changeDepartment()">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nDepartment.$error.required && !$ctrl.frmModal.nDepartment.$pristine">
              * Seleccione un departamento
            </div>
          </div>
        </div>
        <div class="row" ng-if="$ctrl.isSoat">
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Provincia ', required: true}"
              name="nProvince"
              ng-model="$ctrl.beneficiary.province"
              m-data-source="$ctrl.provinceList"
              text-field="provinceName"
              value-field="idProvince"
              ng-required="true"
              m-Empty-Option="{enterData:true}"
              ng-change="$ctrl.changeProvince()">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nProvince.$error.required && !$ctrl.frmModal.nProvince.$pristine">
              * Seleccione una provincia
            </div>
          </div>
          <div class="col-xs-12 col-sm-6 mt-xs-1 mt-sm-3">
            <mpf-select
              label="{label: 'Distrito ', required: true}"
              name="nDistrict"
              ng-model="$ctrl.beneficiary.district"
              m-data-source="$ctrl.districtList"
              text-field="districtName"
              value-field="idDistrict"
              ng-required="true"
              m-Empty-Option="{enterData:true}">
            </mpf-select>
            <div
              class="g-error"
              ng-show="$ctrl.frmModal.nDistrict.$error.required && !$ctrl.frmModal.nDistrict.$pristine">
              * Seleccione un distrito
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container g-modal-footer pt-xs-2 mt-sm-3">
      <div class="col-md-4 col-md-offset-4 mb-xs-1 no-mb-md">
        <a
          href="javascript:void(0)"
          class="g-btn g-btn-verde block"
          ng-class="{'disabled': $ctrl.beneficiary === undefined}"
          ng-click="$ctrl.sendBeneficiary()">
          Aceptar
        </a>
      </div>
    </div>
  </form>
</section>
