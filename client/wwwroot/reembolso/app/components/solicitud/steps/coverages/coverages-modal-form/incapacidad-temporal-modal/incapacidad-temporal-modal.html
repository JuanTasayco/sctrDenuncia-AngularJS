<section class="g-page-popup g-reembolso-popup body-pasos">
  <button type="button" class="close g-close-modal" ng-click="$ctrl.cerrar()">
    <span class=" ico-mapfre_231_cancelaroff"></span>
  </button>
  <form name="$ctrl.frmModal">
    <div class="container g-modal-header g-text-uppercase">
      <div class="col-xs-12">
        <div class="row">
          <div class="col-md-12 mb-xs-1">
            <h2 class="gH3"><b>Incapacidad Temporal</b></h2>
          </div>
        </div>
      </div>
    </div>
    <div class="container g-modal-body pt-xs-2 pb-xs-2">
      <div class="col-xs-12">
        <div class="container g-modal-body pt-xs-2 pb-xs-2">
          <div class="col-xs-12">
            <div class="row">
              <div class="col-xs-12 g-box box-search-afiliado box-search-afiliado--no-height">
                <div class="row">
                  <div class="col-xs-12">
                    <uib-accordion close-others="planCtrl.oneAtATime">
                      <div uib-accordion-group class="panel-default acordion no-hidden" is-open="true">
                        <uib-accordion-heading>
                          <div ng-click="planCtrl.Acordion1()">
                            Datos de la indemnización
                            <i
                              class="pull-right i-acordion"
                              ng-class="{'ico-mapfre_309_arrowUp': planCtrl.status.open1,'ico-mapfre_308_arrowDown': !planCtrl.status.open1}">
                            </i>
                          </div>
                        </uib-accordion-heading>
                        <div class="col-xs-12 panel1">
                          <div class="row">
                            <div class="col-xs-12 col-sm-3 mt-xs-2 mt-sm-0">
                              <div class="input-group g-date-picker">
                                <label class="g-placeholder animated">Inicio de beneficio<span></span>:</label>
                                <input
                                  type="text"
                                  class="form-control"
                                  name="nBenefitInit"
                                  ng-model="$ctrl.frmCoverage.benefitDateStart.model"
                                  uib-datepicker-popup="{{$ctrl.frmCoverage.benefitDateStart.FORMAT_DATE}}"
                                  is-open="$ctrl.frmCoverage.benefitDateStart.open"
                                  datepicker-options="$ctrl.frmCoverage.benefitDateStart.options"
                                  close-text="Close"
                                  alt-input-formats="$ctrl.frmCoverage.benefitDateStart.ALT_INPUT_FORMATS"
                                  ui-mask="{{$ctrl.frmCoverage.benefitDateStart.FORMAT_MASK}}"
                                  ng-pattern="$ctrl.frmCoverage.benefitDateStart.FORMAT_PATTERN"
                                  model-view-value="true"
                                  ng-required="true"
                                  ng-disabled="false"
                                  ng-change="$ctrl.changeBenefitStartDate($ctrl.frmCoverage.benefitDateStart.model)"/>
                                <span class="input-group-btn">
                                  <button
                                    type="button"
                                    class="btn btn-default"
                                    ng-disabled = "false"
                                    ng-click="$ctrl.frmCoverage.benefitDateStart.setOpen(true)">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                  </button>
                                </span>
                              </div>
                              <ul class="g-error">
                                <li ng-show="!$ctrl.frmModal.nBenefitInit.$error.required && $ctrl.frmModal.nBenefitInit.$invalid && !$ctrl.frmModal.nBenefitInit.$pristine">* Fecha incorrecta</li>
                                <li ng-show="$ctrl.frmModal.nBenefitInit.$error.required && !$ctrl.frmModal.nBenefitInit.$pristine">* Este campo es necesario</li>
                              </ul>
                            </div>
                            <div class="col-xs-12 col-sm-3 mt-xs-2 mt-sm-0">
                              <div class="input-group g-date-picker">
                                <label class="g-placeholder animated">Fin de beneficio<span></span>:</label>
                                <input
                                  type="text"
                                  class="form-control"
                                  name="nBenefitEnd"
                                  ng-model="$ctrl.frmCoverage.benefitDateEnd.model"
                                  uib-datepicker-popup="{{$ctrl.frmCoverage.benefitDateEnd.FORMAT_DATE}}"
                                  is-open="$ctrl.frmCoverage.benefitDateEnd.open"
                                  datepicker-options="$ctrl.frmCoverage.benefitDateEnd.options"
                                  close-text="Close"
                                  alt-input-formats="$ctrl.frmCoverage.benefitDateEnd.ALT_INPUT_FORMATS"
                                  ui-mask="{{$ctrl.frmCoverage.benefitDateEnd.FORMAT_MASK}}"
                                  ng-pattern="$ctrl.frmCoverage.benefitDateEnd.FORMAT_PATTERN"
                                  model-view-value="true"
                                  ng-required="true"
                                  ng-disabled="$ctrl.isDisabledEndDate"
                                  ng-change="$ctrl.calculationCompensation($ctrl.frmCoverage.benefitDateEnd.model)"/>
                                <span class="input-group-btn">
                                  <button
                                    type="button"
                                    class="btn btn-default"
                                    ng-disabled = "false"
                                    ng-click="$ctrl.frmCoverage.benefitDateEnd.setOpen(true)">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                  </button>
                                </span>
                              </div>
                              <ul class="g-error">
                                <li ng-show="$ctrl.wrongDate">
                                  * Fecha de fin debe ser mayor a la fecha de inicio
                                </li>
                                <li ng-show="!$ctrl.frmModal.nBenefitEnd.$error.required && $ctrl.frmModal.nBenefitEnd.$invalid && !$ctrl.frmModal.nBenefitEnd.$pristine">* Fecha incorrecta</li>
                                <li ng-show="$ctrl.frmModal.nBenefitEnd.$error.required && !$ctrl.frmModal.nBenefitEnd.$pristine">* Este campo es necesario</li>
                              </ul>
                            </div>
                            <div class="col-xs-12 col-sm-3 mt-xs-1 mt-sm-0">
                              <mpf-input
                                label="{label: 'Número días beneficio ', required: true}"
                                name="nDiasBeneficio"
                                ng-model="$ctrl.frmCoverage.benefitNumberDays"
                                ng-disabled="true">
                              </mpf-input>
                              <div
                                class="g-error"
                                ng-show="$ctrl.frmModal.nDiasBeneficio.$error.required && !$ctrl.frmModal.nDiasBeneficio.$pristine">
                                * Campo requerido
                              </div>
                            </div>
                            <div class="col-xs-12 col-sm-3 mt-xs-1 mt-sm-0">
                              <mpf-input
                                label="{label: 'Importe indemnización ', required: true}"
                                name="nImporteIndemnizacion"
                                ng-model="$ctrl.frmCoverage.compensationAmount"
                                ng-disabled="true">
                              </mpf-input>
                              <div
                                class="g-error"
                                ng-show="$ctrl.frmModal.nImporteIndemnizacion.$error.required && !$ctrl.frmModal.nImporteIndemnizacion.$pristine">
                                * Campo requerido
                              </div>
                            </div>
                          </div>
                          <div class="row mt-xs-2">
                            <div class="col-xs-12 col-sm-3 mt-xs-1 mt-sm-0">
                              <mpf-input
                                label="{label: 'Sueldo mínimo vital ', required: true}"
                                name="nPlan"
                                ng-model="$ctrl.frmCoverage.salaryMinimun"
                                ng-disabled="true">
                              </mpf-input>
                            </div>
                            <div class="col-xs-12 col-sm-3 mt-xs-1 mt-sm-0">
                              <mpf-input
                                label="{label: 'Valor de la UIT S/ ', required: true}"
                                name="nPlan"
                                ng-model="$ctrl.frmCoverage.uitValue"
                                ng-disabled="true">
                              </mpf-input>
                            </div>
                            <div class="col-xs-12 col-sm-3 mt-xs-1 mt-sm-0">
                              <mpf-input
                                label="{label: 'Días correspondientes ', required: true}"
                                name="nPlan"
                                ng-model="$ctrl.frmCoverage.daysOff"
                                ng-disabled="true">
                              </mpf-input>
                            </div>
                            <div class="col-xs-12 col-sm-3 mt-xs-1 mt-sm-0">
                              <mpf-input
                                label="{label: 'Días restantes ', required: true}"
                                name="nPlan"
                                ng-model="$ctrl.frmCoverage.remainingDays"
                                ng-disabled="true">
                              </mpf-input>
                            </div>
                          </div>
                        </div>
                      </div>
                    </uib-accordion>
                  </div>
                </div>
                <re-coverage-grid
                  table-list="$ctrl.compensationList"
                  delete="$ctrl.deleteCompensation"
                  edit="$ctrl.editCompensation">
                </re-coverage-grid>
                <div class="row mt-xs-2">
                  <div class="col-xs-12 col-sm-4 col-sm-offset-4">
                    <a class="g-btn g-btn-white second-design block" ng-click="$ctrl.cleanCompensation()">
                      <span class="g-icon">
                        <span>Limpiar</span>
                      </span>
                    </a>
                  </div>
                  <div class="col-xs-12 col-sm-4">
                    <a class="g-btn g-btn-white second-design block" ng-click="$ctrl.addCompensation()">
                      <span class="g-icon">
                        <span class="icon icon-plus ico-mapfre_56_visitasalmedico"></span>
                        <span>Agregar</span>
                      </span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container g-modal-footer pt-xs-2">
      <div class="col-md-4 col-md-offset-4 mb-xs-1 no-mb-md">
        <a
          href="javascript:void(0)"
          class="g-btn g-btn-verde block"
          ng-class="{'disabled': !$ctrl.compensationList.length}"
          ng-click="$ctrl.aceptar()">
          Aceptar
        </a>
      </div>
    </div>
  </form>
</section>
