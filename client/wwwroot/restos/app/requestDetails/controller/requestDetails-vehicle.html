<div class="g-section">
  <div class="col-md-12 fz14 pt-xs-2 pb-xs-2">
    <div class="row">
      <div class="col-md-12">
        <h2 class="g-sub-title red">Datos del vehículo</h2>
      </div>
    </div>
    <form name="vehicleData" class="mb-xs-3">
      <ul class="row mb-xs-1">
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Nro. de placa</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.NUM_PLCA || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-select-desing g-select-sm">
            <label class="g-placeholder animated">Tipo combustible</label>
            <select ng-model="request.Vehiculo.TIP_MTOR"
                    name="rTIP_MTOR"
                    ng-options="+option.CODIGO as option.NOMBRE for option in params.engineTypes">
              <option value="" disabled>-- SELECCIONA --</option>
            </select>
            <span class="ico-mapfre_308_arrowDown ico-select"></span>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Nro. de motor</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.NRO_MTOR || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Año</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.ANIO_FBRCCION || '--' }}</div>
          </div>
        </li>
      </ul>
      <ul class="row mb-xs-1">
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Marca</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.COD_MARCA_DESC || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Modelo</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.COD_MDLO_DESC || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Sub-modelo</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.COD_SB_MDLO_DESC || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Tipo</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.TIP_VEH_DESC || '--' }}</div>
          </div>
        </li>
      </ul>
      <ul class="row mb-xs-1">
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Nro. Chasis</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.NRO_CHSIS || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Transmisión</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.TPO_TRASM_DESC || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Nro. de serie</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.NRO_SRIE_VIN || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Color</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.COD_CLOR_DESC || '--' }}</div>
          </div>
        </li>
      </ul>
      <ul class="row mb-xs-1">
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Tracción</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.TIP_TRCCON_DESC || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Peso</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.PSO_VEH || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Cilindrada</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.NRO_CLNDRDDAS || '--' }}</div>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="row">
            <div class="col-xs-12 item-label">
              <b>Nro. de puertas</b>
            </div>
            <div class="col-xs-12 item-dato g-text-uppercase">{{ request.Vehiculo.NRO_PRTAS || '--' }}</div>
          </div>
        </li>
      </ul>
      <ul class="row mb-xs-1">
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-input-design g-input-sm">
            <label class="g-placeholder"
                   ng-class="{animated: vehicleData.rKLMTRJE_VEHI.$focused || vehicleData.rKLMTRJE_VEHI.$viewValue}">
              Kilometraje (Km)
            </label>
            <input type="text"
                   name="rKLMTRJE_VEHI"
                   ng-model="request.Vehiculo.KLMTRJE_VEHI"
                   ng-focus="vehicleData.rKLMTRJE_VEHI.$focused = true"
                   ng-blur="vehicleData.rKLMTRJE_VEHI.$focused = false"
                   ng-pattern="/^\d+$/">
          </div>
          <ul class="g-error">
            <li ng-show="vehicleData.rKLMTRJE_VEHI.$error.pattern">Este campo solo admite valores numéricos</li>
          </ul>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-select-desing g-select-sm">
            <label class="g-placeholder animated">Tipo de timón</label>
            <select ng-model="request.Vehiculo.TIP_TMON"
                    name="rTIP_TMON">
              <option value="" disabled>-- SELECCIONA --</option>
              <option ng-repeat="option in params.steeringWheelTypes" ng-value="option.CODIGO">{{option.NOMBRE}}</option>
            </select>
            <span class="ico-mapfre_308_arrowDown ico-select"></span>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-select-desing g-select-sm">
            <label class="g-placeholder animated">Moneda valor comercial</label>
            <select ng-model="request.Vehiculo.MON_VLR_CMRCIAL"
                    name="rMON_VLR_CMRCIAL"
                    ng-options="+option.CODIGO as option.NOMBRE for option in params.currencies">
              <option value="" disabled>-- SELECCIONA --</option>
            </select>
            <span class="ico-mapfre_308_arrowDown ico-select"></span>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-input-design g-input-sm">
            <label class="g-placeholder animated">
              Valor comercial*
            </label>
            <input type="text"
                   name="rVLR_CMRCIAL"
                   ng-model="request.Vehiculo.VLR_CMRCIAL"
                   ng-pattern="/^(\d+(?:[\.]\d{1,2})?)$/"
                   required>
          </div>
          <ul class="g-error">
            <li ng-show="vehicleData.rVLR_CMRCIAL.$error.pattern">Este campo solo admite valores en formato monetario</li>
            <li ng-show="vehicleData.rVLR_CMRCIAL.$error.required && vehicleData.rVLR_CMRCIAL.$dirty">Este campo es obligatorio</li>
          </ul>
        </li>
      </ul>
      <ul class="row mb-xs-1">
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-select-desing g-select-sm">
            <label class="g-placeholder animated">Moneda valor restos</label>
            <select ng-model="request.Vehiculo.MON_VLR_RSTO"
                    name="rMON_VLR_RSTO"
                    ng-options="+option.CODIGO as option.NOMBRE for option in params.currencies">
              <option value="" disabled>-- SELECCIONA --</option>
            </select>
            <span class="ico-mapfre_308_arrowDown ico-select"></span>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-input-design g-input-sm">
            <label class="g-placeholder animated">
              Valor de restos*
            </label>
            <input type="text"
                   name="rVLR_RSTO"
                   ng-model="request.Vehiculo.VLR_RSTO"
                   ng-pattern="/^(\d+(?:[\.]\d{1,2})?)$/"
                   required>
          </div>
          <ul class="g-error">
            <li ng-show="vehicleData.rVLR_RSTO.$error.pattern">Este campo solo admite valores en formato monetario</li>
            <li ng-show="vehicleData.rVLR_RSTO.$error.required && vehicleData.rVLR_RSTO.$dirty">Este campo es obligatorio</li>
          </ul>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-select-desing g-select-sm">
            <label class="g-placeholder animated">Moneda de la suma asegurada</label>
            <select ng-model="request.Vehiculo.MON_SMA_ASGRDA"
                    name="rMON_SMA_ASGRDA"
                    ng-options="+option.CODIGO as option.NOMBRE for option in params.currencies">
              <option value="" disabled>-- SELECCIONA --</option>
            </select>
            <span class="ico-mapfre_308_arrowDown ico-select"></span>
          </div>
        </li>
        <li class="col-sm-6 col-md-3 clearfix cnt-item">
          <div class="g-input-design g-input-sm">
            <label class="g-placeholder animated">
              Suma asegurada*
            </label>
            <input type="text"
                   name="rSMA_ASGRDA"
                   ng-model="request.Vehiculo.SMA_ASGRDA"
                   ng-pattern="/^(\d+(?:[\.]\d{1,2})?)$/"
                   required>
          </div>
          <ul class="g-error">
            <li ng-show="vehicleData.rSMA_ASGRDA.$error.pattern">Este campo solo admite valores en formato monetario</li>
            <li ng-show="vehicleData.rSMA_ASGRDA.$error.required && vehicleData.rSMA_ASGRDA.$dirty">Este campo es obligatorio</li>
          </ul>
        </li>
      </ul>
      <!-- <pre>{{vehicleData | json }}</pre> -->
      <div class="row mt-xs-3 mb-xs-2" ng-show="requestChanged">
        <div class="col-md-offset-4 col-md-4">
          <button class="g-btn g-btn-verde second-design block"
                  ng-disabled="vehicleData.$invalid"
                  ng-click="updateRequest()">Guardar cambios</button>
        </div>
      </div>
    </form>
    <!-- Inicio Inventario -->
    <div class="row"
         ng-show="!showingInventory"
         ng-if="(request.state.code === 1 && canDo('INVEN_ENT')) || (request.state.code !== 1 && canDo('INVEN_SAL'))">
      <div class="col-md-12">
        <div class="g-box gBgcGray5 pt-xs-3 pb-xs-3">
          <div class="clearfix">
            <div class="col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3">
              <button class="g-btn second-design g-btn-white block" type="button" name="nAgregarInventario" ng-model="mAgregarInventario" ng-required="false" ng-click="showInventory(true)">
                <span class="icon icon-plus ico-mapfre_56_visitasalmedico"></span>
                <span>Agregar inventario {{request.state.code === 1 ? ' de entrada' : ' de salida'}}</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-xs-2" ng-if="showingInventory">
      <div class="col-md-12 g-border-top pt-xs-1 mt-xs-1">
        <h2 class="g-sub-title red">Inventario</h2>
      </div>
    </div>
    <div class="g-section-tabs second-design tabs-vehiculo" ng-if="showingInventory">

      <uib-tabset justified="true" active="1">
        <uib-tab ng-repeat="group in request.Inventario.grupos" index="group.id">
          <uib-tab-heading>{{group.name}}</uib-tab-heading>
          <div class="col-md-12 g-box gBgcGray5 no-btl-radius no-btr-radius pt-xs-2 pb-xs-2 mb-xs-3 g-border-md no-top">
            <div class="row">
              <div ng-class="request.state.code < 6 ? 'col-md-12' : 'col-md-6'">
                <div class="gBgcWhite1 g-box">

                  <h3 ng-show="request.state.code >= 6"
                      class="gBgcGray5 g-border-bottom text-center gH5 pt-xs-1 pb-xs-1"><b>INVENTARIO DE ENTRADA</b></h3>

                  <div class="pt-xs-1 pl-xs-1 pr-xs-1 pb-xs-1 g-overflow-hidden-xs">
                    <div class="row">
                      <div class="col-sm-4 gH5 g-text-uppercase"><b>{{group.name}}</b></div>
                      <div class="col-sm-8 gH5 g-text-uppercase"><b>Comentario</b></div>
                    </div>
                    <div class="col-xs-12" ng-repeat="item in group.items" ng-class="{gBgcGray5: item.MCA_DFRNCIA}">
                      <div class="row">
                        <div class="col-sm-4 mt-xs-1">
                          <label class="fw-normal g-checkbox" ng-class="{active : item.MCA_ENTRDA}">
                            <span class="ico-checkbox"></span>
                            <input  type="checkbox"
                                    ng-model="item.MCA_ENTRDA"
                                    ng-disabled="request.state.code !== 1"
                            ><span class="checkbox-label">{{item.DESC_PART_VEH}}</span>
                          </label>
                        </div>
                        <div class="col-sm-8 g-input-horz">
                          <div class="g-input-design">
                            <input type="text" ng-model="item.OBS_ENTRDA"
                                   ng-disabled="request.state.code !== 1">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div ng-if="request.state.code >= 6"
                   class="col-md-6">
                <div class="gBgcWhite1 g-box">

                  <h3 class="gBgcGray5 g-border-bottom text-center gH5 pt-xs-1 pb-xs-1"><b>INVENTARIO DE SALIDA</b></h3>

                  <div class="pt-xs-1 pl-xs-1 pr-xs-1 pb-xs-1 g-overflow-hidden-xs">
                    <div class="row">
                      <div class="col-sm-4 gH5 g-text-uppercase"><b>{{group.name}}</b></div>
                      <div class="col-sm-8 gH5 g-text-uppercase"><b>Comentario</b></div>
                    </div>
                    <div class="col-xs-12" ng-class="{gBgcGray5: item.MCA_DFRNCIA}" ng-repeat="item in group.items">
                      <div class="row">
                        <div class="col-sm-4 mt-xs-1">
                          <label class="fw-normal g-checkbox" ng-class="{active : item.MCA_SALDA}">
                            <span class="ico-checkbox"></span>
                            <input  type="checkbox"
                                    ng-model="item.MCA_SALDA"
                                    ng-disabled="request.state.code !== 6"
                            ><span class="checkbox-label">{{item.DESC_PART_VEH}}</span>
                          </label>
                        </div>
                        <div class="col-sm-8 g-input-horz">
                          <div class="g-input-design">
                            <input type="text" ng-model="item.OBS_SLDA"
                                   ng-disabled="request.state.code !== 6">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </uib-tab>
        <uib-tab index="7">
          <uib-tab-heading>OBSERVACIONES</uib-tab-heading>
          <div class="col-md-12 g-box gBgcGray5 no-btl-radius no-btr-radius pt-xs-2 pb-xs-2 mb-xs-3 g-border-md no-top">
            <div class="row">
              <div class="col-md-12">
                <div class="gBgcWhite1 g-box pt-xs-1 pl-xs-1 pr-xs-1 pb-xs-1">
                  <div class="row">
                    <div class="col-sm-12 gH5 g-text-uppercase"><b>OBSERVACIONES</b></div>
                  </div>
                  <div class="row">
                    <div class="mt-xs-1" ng-class="request.state.code < 6 ? 'col-sm-12' : 'col-sm-6'">
                      <mpf-textarea label="{label: '', required: false}"
                                    ng-model="request.Inventario.OBS_ENTRADA_INV"
                                    ng-disabled="request.state.code !== 1"></mpf-textarea>
                    </div>
                    <div class="col-sm-6 mt-xs-1" ng-if="request.state.code >= 6">
                      <mpf-textarea label="{label: '', required: false}"
                                    ng-model="request.Inventario.OBS_SALIDA_INV"
                                    ng-disabled="request.state.code !== 6"></mpf-textarea>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </uib-tab>
      </uib-tabset>
      <div class="row mt-xs-5" ng-if="showingInventory && (request.state.code === 1 || request.state.code === 6)">
        <div class="col-md-offset-3 col-md-3 mb-xs-1 no-mb-md">
          <button class="g-btn g-btn-white second-design block"
                  ng-click="showingInventory = false">Cancelar</button>
        </div>
        <div class="col-md-3">
          <button class="g-btn g-btn-verde second-design block" ng-click="saveInventory(request.state.code === 1 ? 'register': 'modify')">Guardar inventario</button>
        </div>
      </div>
      <div class="row mt-xs-5" ng-if="hasInventoryDifferences && canDo('NOTI_DIFE')">
        <div class="col-md-offset-4 col-md-4 mb-xs-1 no-mb-md">
          <button class="g-btn g-btn-white second-design block"
                  ng-click="notifyInventoryDifferences()">Notificar diferencias</button>
        </div>
      </div>
    </div>
    <!-- Fin Inventario -->
  </div>
</div>
