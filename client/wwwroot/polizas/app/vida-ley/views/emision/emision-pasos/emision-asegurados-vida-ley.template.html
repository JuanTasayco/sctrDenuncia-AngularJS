<mpf-cotizacion-resumen show-contratante="true" show-poliza="true"></mpf-cotizacion-resumen>

<form name="frmSecondStep">
  <div class="g-section g-sec-information">
    <div class="container">
      <div class="row cnt-title h-myd-mb--0 mt-md-2">
        <div class="col-md-8 mb-xs-1">
          <h2 class="g-sub-title g-myd-subtitle mb-1">Datos de la cobertura y asegurados</h2>
        </div>
      </div>

      <div class="row h-myd-ml--0 h-myd-mr--0 g-list-md mb-xs-1">
        <div class="col-md-12">
          <div class="clearfix g-box g-overflow-hidden-xs">
            <ul class="clearfix g-list gBgcGray5 pt-xs-1 hidden-xs">
              <li class="col-md-1 col-sm-2 clearfix cnt-item">
                <b>Riesgo</b>
              </li>
              <li class="col-md-3 col-sm-4 clearfix cnt-item">
                <b>Categoría</b>
              </li>
              <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                <b>Nro. Trabajadores</b>
              </li>
              <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                <b>Planilla</b>
              </li>
              <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                <b>Tasa</b>
              </li>
              <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                <b>Prima Neta</b>
              </li>
            </ul>
            <div class="col-md-12 cnt-content g-list-sm pt-xs-1 gnContentAuto-md">
              <div class="clearfix ng-scope mb-xs-1">
                <ul class="row hidden-xs" ng-repeat="riesgo in vm.riesgos | orderBy: 'NumRiesgo'">
                  <li class="col-sm-1 cnt-item item-dato g-text-uppercase">
                      {{riesgo.NumRiesgo}}
                  </li>
                  <li class="col-sm-3 cnt-item item-dato g-text-uppercase">
                      {{riesgo.NomCategoria}}
                  </li>
                  <li class="col-sm-2 cnt-item item-dato g-text-uppercase g-text-right-xs">
                      {{riesgo.CantTrabajadores}}
                  </li>
                  <li class="col-sm-2 cnt-item item-dato g-text-uppercase g-text-right-xs" ng-if="riesgo.ImportePlanillaReal <= riesgo.ImportePlanillaTopado">
                      {{riesgo.ImportePlanilla || riesgo.ImportePlanillaReal | currency:vm.currency}}
                  </li>
                  <li class="col-sm-2 cnt-item item-dato g-text-uppercase g-text-right-xs" ng-if="riesgo.ImportePlanillaReal > riesgo.ImportePlanillaTopado">
                    {{riesgo.ImportePlanillaTopado | currency:vm.currency}}
                 </li>
                  <li class="col-sm-2 cnt-item item-dato g-text-uppercase g-text-right-xs">
                    {{ riesgo.Tasa }}%
                  </li>
                  <li class="col-sm-2 cnt-item item-dato g-text-uppercase g-text-right-xs">
                      {{riesgo.PrimaNeta | currency:vm.currency}}
                  </li>
                </ul>
                <ul class="row visible-xs" ng-repeat="riesgo in vm.cotizacion.Riesgos | orderBy: 'NumRiesgo'">
                  <li class="cnt-item clearfix">
                    <div class="col-ms-5 item-label">Riesgo:</div>
                    <div class="col-ms-7 item-dato g-text-uppercase">{{riesgo.NumRiesgo}}</div>
                  </li>
                  <li class="cnt-item clearfix">
                    <div class="col-ms-5 item-label">Categoría:</div>
                    <div class="col-ms-7 item-dato g-text-uppercase">{{riesgo.NomCategoria}}</div>
                  </li>
                  <li class="cnt-item clearfix">
                    <div class="col-ms-5 item-label">Nro. Trabajadores:</div>
                    <div class="col-ms-7 item-dato g-text-uppercase">{{riesgo.CantTrabajadores}}</div>
                  </li>
                  <li class="cnt-item clearfix">
                    <div class="col-ms-5 item-label">Planilla:</div>
                    <div class="col-ms-7 item-dato g-text-uppercase" ng-if="riesgo.ImportePlanillaReal <= riesgo.ImportePlanillaTopado">{{riesgo.ImportePlanilla || riesgo.ImportePlanillaReal | currency:vm.currency}}</div>
                    <div class="col-ms-7 item-dato g-text-uppercase" ng-if="riesgo.ImportePlanillaReal > riesgo.ImportePlanillaTopado">{{riesgo.ImportePlanillaTopado | currency:vm.currency}}</div>
                  </li>
                  <li class="cnt-item clearfix">
                    <div class="col-ms-5 item-label">Tasa:</div>
                    <div class="col-ms-7 item-dato g-text-uppercase">{{ riesgo.Tasa }}%</div>
                  </li>
                  <li class="cnt-item clearfix">
                    <div class="col-ms-5 item-label">Prima Neta:</div>
                    <div class="col-ms-7 item-dato g-text-uppercase">{{riesgo.PrimaNeta | currency:vm.currency}}</div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="col-md-12 hidden-xs">
              <ul class="row gH5 g-list-sm gBgcGray5 pt-xs-1">
                <li class="col-sm-offset-2 col-md-2 col-sm-2 clearfix cnt-item">
                  <div class="row">
                    <div class="col-sm-5 col-ms-5 item-label">Total</div>
                  </div>
                </li>
                <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                  <div class="row">
                    <div class="col-md-12 item-dato g-text-uppercase">
                      <b>{{vm.getTotalTrabajadores()}}</b>
                    </div>
                  </div>
                </li>
                <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                  <div class="row">
                    <div class="col-md-12 item-dato g-text-uppercase">
                      <b class="ng-binding">{{vm.getTotalPlanilla() | currency:vm.currency}}</b>
                    </div>
                  </div>
                </li>
                <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                  <div class="row">
                    <div class="col-md-12 item-dato g-text-uppercase">&nbsp;</div>
                  </div>
                </li>
                <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                  <div class="row">
                    <div class="col-md-12 item-dato g-text-uppercase">
                      <b class="ng-binding">{{vm.cotizacion.Principal.PrimaNeta | currency:vm.currency}}</b>
                    </div>
                  </div>
                </li>
              </ul>
              <ul class="row gH5 g-list-sm gBgcGray5 pt-xs-1">
                <li class="col-sm-offset-2 col-md-8 col-sm-6 clearfix cnt-item">
                  <div class="row">
                    <div class="col-sm-5 col-ms-5 item-label">Monto de recibo</div>
                  </div>
                </li>
                <li class="col-md-2 col-sm-2 clearfix cnt-item g-text-right-sm">
                  <div class="row">
                    <div class="col-md-12 item-dato g-text-uppercase">
                      <b class="ng-binding">{{vm.cotizacion.Principal.MontoRecibo | currency:vm.currency}}</b>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>


      <div class="row cnt-title h-myd-mb--0 mt-md-2">
        <div class="col-md-8 mb-xs-1">
          <h2 class="g-sub-title g-myd-subtitle mb-1">Datos de la constancia</h2>
        </div>
      </div>


      <div class="row">
        <div class="col-md-4 mb-xs-2">
          <mpf-input
            label="{label: 'Centro de riesgo', required: true}"
            ng-maxlength="80"
            name="nCentroRiesgo"
            ng-model="vm.mCentroRiesgo">
          </mpf-input>
          <div class="g-error" ng-show="vm.isEmpty(vm.mCentroRiesgo)">*
            * Este campo es obligatorio
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="g-section h-myd-pt--0">
    <div class="container">
      <div class="row">
        <div class="col-xs-12 mb-xs-3">
          <span class="g-comment">*Campos obligatorios</span>
        </div>
        <div class="col-md-4 col-md-offset-4">
          <a class="g-btn g-btn-verde block" ng-click="vm.grabarEmision()">Emitir</a>
        </div>
      </div>
    </div>
  </div>

</form>
