<section class="g-page g-page-documents g-ui-view">
	
	<page-title info="{title: 'Cotizaciones'}"></page-title>
			<div class="g-section-inner">
				<div class="container">
						<div class="row">
							<!-- Consulta de documentos -->
							<div class="col-md-3 mb-xs-2">
								<div show-filter class="clearfix g-col-filter g-box-md fz14 gBgcGray5-md gBgcWhite1 g-myd-box g-myd-box--filter" ng-class="{'show': isFilterVisible}">
									<form action="" name="frmDocuments">
										<div class="col-md-12 mb-xs-3 gH4 gCGray1">
											<h2 class="pb-xs-1 g-border-bottom-xs hidden-xs hidden-sm">Filtro</h2>
											<div id="show-filter" class="row pt-xs-2 pb-xs-2 gBgcGray5 g-border-bottom-xs hidden-md hidden-lg" ng-click="toggleFilter();">
												<div class="col-xs-10"><h2 class="cnt-title">Filtro</h2></div>
												<div class="col-xs-2 g-text-right-xs">
													<span class="glyphicon glyphicon-chevron-down" ng-if="isFilterVisible"></span>
													<span class="glyphicon glyphicon-chevron-up" ng-if="!isFilterVisible"></span>
												</div>
												<div class="clearfix"></div>
											</div>
										</div>									
										<div class="g-col-filter__box">
											<div class="col-md-12 mb-xs-2">
												<mpf-select label="{label: 'Productos', required: false}" name="nProductoFilter" ng-model="mProductoFilter" m-data-source="productos" text-field="NombreProducto" value-field="CodigoProducto"></mpf-select>
											</div>
											<div class="col-md-12 mb-xs-2">
												<div class="row">											
													<div class="col-md-6 mt-xs-2">
														<div class="g-date-picker">
															<!-- <p class="input-group mb-xs-0"> -->
															<label class="g-placeholder animated">Desde<span></span>:</label>
															<input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="mConsultaDesde" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" placeholder="{{hoy}}" readonly="true" />
															<span class="input-group-btn">
																<button type="button" class="btn btn-default" ng-click="open1()"><i class="glyphicon glyphicon-calendar"></i></button>
															</span>
															<!-- </p> -->
														</div>
													</div>
													<div class="col-md-6 mt-xs-2">
														<div class="g-date-picker">
															<!-- <p class="input-group mb-xs-0"> -->
															<label class="g-placeholder animated">Hasta<span></span>:</label>
															<input type="text" class="form-control" uib-datepicker-popup="{{format}}" ng-model="mConsultaHasta" is-open="popup2.opened" datepicker-options="dateOptions2" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" placeholder="{{hoy}}"  readonly="true"/>
															<span class="input-group-btn">
																<button type="button" class="btn btn-default" ng-click="open2()"><i class="glyphicon glyphicon-calendar"></i></button>
															</span>
															<!-- </p> -->
														</div>
													</div>
												</div>
											</div>

											<div class="col-md-12 mb-xs-2">			
												<div class="row">		
													<div class="col-md-12">					
														<mpf-input label="{label: 'Contratante', required: false}" name="nContratante" ng-model="mContratante"></mpf-input>
													</div>
												</div>
											</div>

											<div class="col-md-12 mb-xs-1">
												<a class="g-btn g-btn-verde block" ng-click="listarCotizacionesVigentes(mContratante, mConsultaDesde, mConsultaHasta, 1); showPages = true; toggleFilter();">Filtrar</a>
											</div>
											<div class="col-md-12">
												<a class="g-btn g-btn-white block" ng-click="limpiar()">Limpiar</a>
											</div>
										</div>
									</form>
								</div>
							</div>
							<div class="col-md-9">									
								<!-- Inicio: Resultados -->
								<div class="clearfix g-box g-overflow-hidden-xs mb-xs-2 ng-scope" ng-repeat="item in Lista">
									<!-- box header -->										
									<div class="row pt-xs-1 gBgcGray5">
										<ul class="clearfix g-list-sm">
											<li class="col-md-9 col-sm-9">
												<ul class="row">
													<li class="col-sm-6 clearfix cnt-item">
														<div class="col-sm-5 col-xs-4 item-label">
															Nro. cotización:
														</div>
														<div class="col-sm-7 col-xs-8 item-dato g-text-uppercase">
															{{item.NumeroDocumento}}
														</div>
													</li>
													<li class="col-sm-6 clearfix cnt-item">
														<div class="col-sm-5 col-xs-4 item-label">
															Fecha cotización: 
														</div>
														<div class="col-sm-7 col-xs-8 item-dato g-text-uppercase">
															{{item.FechaRegistro}}
														</div>
													</li>
												</ul>
											</li>
											<li class="col-md-3 clearfix">
												<div class="col-md-12 mb-xs-1">
													<a href="" class="g-btn g-btn-white block add-ico" ng-click="buscarCoti(item.NumeroDocumento)">Ver cotización</a>
												</div>
											</li>
										</ul>
									</div>
									<!-- box-body -->
									<div class="row g-box-content">
										<ul class="clearfix g-list-sm">
											<li class="col-md-4 clearfix cnt-item">
												<div class="col-sm-5 col-xs-4 item-label">
													Producto cotizado:
												</div>
												<div class="col-sm-7 col-xs-8 item-dato g-text-uppercase">
													{{item.NombreProducto}}
												</div>
											</li>
											<li class="col-md-4 clearfix cnt-item">
												<div class="col-sm-5 col-xs-4 item-label">
													Contratante:
												</div>
												<div class="col-sm-7 col-xs-8 item-dato g-text-uppercase">
													{{item.NombreContratante}}
												</div>
											</li>
											<li class="col-md-4  clearfix cnt-item">
												<div class="col-sm-5 col-xs-4 item-label">
													Usuario:
												</div>
												<div class="col-sm-7 col-xs-8 item-dato g-text-uppercase">
													{{item.UsuarioRegistra}}
												</div>
											</li>
										</ul>
									</div>
								</div>
								<!-- Fin: Resultados -->

								<!-- Inicio: Paginacion -->
								<div class="col-md-12 mb-md-2" ng-show="showPages && showCotizaciones && CantidadTotalPaginas>1">							
									<div class="row">
										<div class="col-md-12">
											<ul class="g-pages">
												<li class="g-pages-item"><a ng-click="consultaDocumentosPrev(mContratante, mConsultaDesde, mConsultaHasta,searchOptions.pageActive.number - 1)"><span class="ico-mapfre_78_chevronleft"></span></a></li>

												<li class="g-pages-item" ng-repeat="pageGrid in getNumber(CantidadTotalPaginas) track by $index" ng-class="{active:pageGrid.active, disabled:!pageGrid.active}">
													<a ng-click="listarCotizacionesVigentes(mContratante, mConsultaDesde, mConsultaHasta, $index)">{{$index+1}}</a>
												</li>

												<li class="g-pages-item"><a ng-click="consultaDocumentosNext(mContratante, mConsultaDesde, mConsultaHasta,searchOptions.pageActive.number + 1)"><span class="ico-mapfre_79_chevroneright"></span></a></li>
											</ul>
										</div>
									</div>
								</div> 

								<!-- Mensaje de error si no hay resultados -->
								<div class="col-md-12 text-center g-box-noresult" ng-if="vacio">
									<div class="row">
										<div class="col-md-12 g-box-noresult-ico gCRed1"><span class="ico-mapfre_302_error"></span></div>
										<div class="col-md-12 g-box-noresult-text">No hay resultados para los filtros escogidos.<br>Intenta de nuevo.</div>
									</div>
								</div>
								<!-- Fin: Paginacion -->
							</div>
							<!-- FIN: Resultado de consulta de documentos -->
						</div>
				</div>
			</div>
</section>