<div class="container mt-xs-3 g-border">
  <div data-ng-init="showUp = false">
    <div class="row pt-xs-2" style="background: rgb(85 84 84);cursor: pointer;" data-ng-click="showUp = !showUp">
      <div class="col-md-11" style="font-size: 20px; color: white;">
        <h3 class="g-sub-title2  mb-md-1 pb-md-1">Lugar de ocurrencia - Unidad asegurada y conductor</h3>
      </div>
      <div class="col-md-1" style="font-size: 20px; color: white;cursor: pointer;">
        <span class="ico-mapfre_76_chevrondown ico-down" data-ng-show="!showUp"></span>
        <span class="ico-mapfre_77_chevronup ico-up" data-ng-show="showUp"></span>
      </div>
    </div>

  </div>
  <div data-ng-show="showUp" class="container" data-ng-form="frmLugarOcurrencia">
    <!-- Lugar del siniestro -->
    <div class="row">
      <div class="col-md-12 mt-xs-3">
        <h2 class="g-sub-title">Lugar del siniestro</h2>
      </div>

      <div class="col-md-4 mb-xs-2">
        <wp-cbo-departamento data-label="{label: 'Departamento', required: false}"
          data-ng-model="frmLugarOcurrencia.codigoDepartamento"
          data-set-model-by-this-key="$ctrl.frmSiniestro.codigoDepartamento"
          data-set-model-by-this-text="$ctrl.frmSiniestro.descripcionDepartamento" name="nDepartament">
        </wp-cbo-departamento>
      </div>
      <div class="col-md-4 mb-xs-2">
        <wp-cbo-provincia data-depa="frmLugarOcurrencia.codigoDepartamento"
          data-prov="$ctrl.frmSiniestro.codigoProvincia" data-label="{label: 'Provincia', required: fase}"
          data-ng-model="frmLugarOcurrencia.codigoProvincia"
          data-set-model-by-this-key="$ctrl.frmSiniestro.codigoProvincia"
          data-set-model-by-this-text="$ctrl.frmSiniestro.descripcionProvincia" name="nProvincia">
        </wp-cbo-provincia>
      </div>
      <div class="col-md-4 mb-xs-2">
        <wp-cbo-distrito data-depa="frmLugarOcurrencia.codigoDepartamento"
          data-label="{label: 'Distrito', required: false}" data-ng-model="frmLugarOcurrencia.codigoDistrito"
          data-set-model-by-this-text="$ctrl.frmSiniestro.descripcionDistrito"
          data-prov="frmLugarOcurrencia.codigoProvincia" 
          data-dist = "$ctrl.frmSiniestro.codigoDistrito"
          data-set-model-by-this-key="$ctrl.frmSiniestro.codigoDistrito"
          name="nDistrito">
        </wp-cbo-distrito>
      </div>

      <div class="col-md-6 mb-xs-2">
        <mpf-input data-ng-maxlength="100" data-ng-model="$ctrl.frmSiniestro.nombreVia"
          label="{label: 'Nombre de vía', required: false}" name="nNombreVia">
        </mpf-input>
      </div>
      <div class="col-md-6 mb-xs-2">
        <mpf-input data-ng-maxlength="400" data-ng-model="$ctrl.frmSiniestro.referenciaVia"
          label="{label: 'Referencia lugar del accidente', required: false}" name="nReferenciaVia">
        </mpf-input>
      </div>

      <div class="col-md-3 mb-xs-2">
        <mpf-datepicker data-format="$ctrl.dateFormat" data-ng-model="frmLugarOcurrencia.fechaSiniestroContactCenter"
          data-ng-required="true" data-parsear-to-date="true" ng-disabled="true" data-set-max-today="true"
          data-set-model-by-this-data="$ctrl.frmSiniestro.fechaSiniestroContactCenter"
          label="{label: 'Fecha del siniestro (Contact Center):', required: true}" name="nSiniestroFecha">
        </mpf-datepicker>

      </div>
      <div class="col-md-3 mb-xs-2">
        <mpf-input data-ng-model="$ctrl.frmSiniestro.horaLlamado"
          label="{label: 'Hora del siniestro (Contact Center)', required: false}" name="nHoraLlamado"
          ng-disabled="true">
      </div>
      <div class="col-md-3 mb-xs-2">
        <mpf-datepicker data-format="$ctrl.dateFormat" data-ng-model="frmLugarOcurrencia.fechaSiniestro"
          data-ng-required="true" data-parsear-to-date="true" data-readonly="false" data-set-max-today="true"
          data-set-model-by-this-data="$ctrl.frmSiniestro.fechaSiniestro"
          label="{label: 'Fecha del siniestro:', required: true}" name="nSiniestroFecha">
        </mpf-datepicker>
        <div class="g-error"
          data-ng-show="frmLugarOcurrencia.nSiniestroFecha.$invalid && !frmLugarOcurrencia.nSiniestroFecha.$pristine">
          Este campo es obligatorio
        </div>
      </div>
      <div class="col-md-3 mb-xs-2">
        <div class="g-input-design">
          <label class="g-placeholder ng-binding" ng-class="{animated: true}">
            Hora del siniestro<span>*</span>
          </label>
          <input type="text" name="nSiniestroHora" placeholder="__:__" ng-model="$ctrl.frm.horaFinAtencion" ng-focus="ngFocus()"
            ng-required="true" ng-minlength="5" ng-pattern="$ctrl.pattern" ng-maxlength="5" ui-mask="99:99">
        </div>
        <div class="g-error" data-ng-show="frmLugarOcurrencia.nSiniestroHora.$invalid && !frmLugarOcurrencia.nSiniestroHora.$pristine">
          * Ingrese una hora válida
        </div>
      </div>

      <div class="col-md-4 mb-xs-2">
        <wp-cbo-tipo-siniestro data-ng-disabled="$ctrl.statusBlock.blockByGenerado"
          data-label="{label: 'Tipo del Siniestro', required: true}"
          data-ng-change="$ctrl.getCheckList(frmLugarOcurrencia.nTipoSiniestro.$viewValue)"
          data-ng-model="frmLugarOcurrencia.tipoSiniestro" data-option-default="{enterData: true}"
          data-set-model-by-this-key="$ctrl.frmSiniestro.codigoTipoSiniestro"
          data-set-model-by-this-Text="$ctrl.frmSiniestro.descripcionTipoSiniestro" name="nTipoSiniestro">
        </wp-cbo-tipo-siniestro>
        <div class="g-error"
          data-ng-show="frmLugarOcurrencia.nTipoSiniestro.$invalid && !frmLugarOcurrencia.nTipoSiniestro.$pristine">
          Este campo es obligatorio
        </div>
      </div>
      <div class="col-md-6 mb-xs-2">
        <div class="row">
          <div class="col-md-12"><span class="g-label text-left">Seleccione el detalle del tipo de siniestro</span>
          </div>
          <div class="col-md-3 col-sm-3 col-xs-3 mt-xs-2" ng-repeat="siniestroType in $ctrl.siniestroTypeCheckList">
            <m-radio data-ng-model="$ctrl.frmSiniestro.codigoSubSiniestro"
              label="{label:siniestroType.nombreValorDetalle}" name="nTipoSiniestroDetalle"
              value="{{siniestroType.codigoValor}}"
              ng-click="$ctrl.frmSiniestro.descripcionSubSiniestro = siniestroType.nombreValorDetalle">
            </m-radio>
          </div>

        </div>
      </div>
    </div>

    <!-- Exoneracion de denuncia -->
    <div class="row">
      <div class="col-md-4">
        <h2 class="g-sub-title">Apreciación etílica</h2>
        <div class="row mb-xs-2">
          <div class="col-md-12"><span class="g-label text-left">Apreciación etilica</span></div>
          <div class="col-md-4 col-sm-3 col-xs-3 mt-xs-1">
            <m-radio data-ng-model="$ctrl.frmSiniestro.apreciacionEtilica" data-is-input-boolean="true"
              label="{label: 'Positiva'}" name="nApreciaciónElitica" value="true">
            </m-radio>
          </div>
          <div class="col-md-8 col-sm-3 col-xs-3 mt-xs-1">
            <m-radio data-ng-model="$ctrl.frmSiniestro.apreciacionEtilica" data-is-input-boolean="true"
              label="{label: 'Negativa'}" name="nApreciaciónElitica" value="false">
            </m-radio>
          </div>
        </div>
      </div>
      <div class="col-md-4">
        <h2 class="g-sub-title">Trámites policiales</h2>
        <div class="row mb-xs-2">
          <div class="col-md-12"><span class="g-label text-left">¿Hay exoneracion de denuncia/dosage?</span></div>
          <div class="col-md-3 col-sm-3 col-xs-3 mt-xs-1">
            <m-radio data-ng-model="$ctrl.frmSiniestro.exoneraDenuncia" data-is-input-boolean="true"
              label="{label: 'Si'}" name="nExoneracion" value="true">
            </m-radio>
          </div>
          <div class="col-md-9 col-sm-3 col-xs-3 mt-xs-1">
            <m-radio data-ng-model="$ctrl.frmSiniestro.exoneraDenuncia" data-is-input-boolean="true"
              label="{label: 'No'}" name="nExoneracion" value="false">
            </m-radio>
          </div>
        </div>
      </div>
      <!-- <div class="col-md-4" ng-if="!$ctrl.frmSiniestro.exoneraDenuncia">
        <h2 class="g-sub-title">Comisaría</h2>
        <div class="row g-center-flex">
          <div class="col-md-8">
            <div class="row">
              <div class="col-md-12 mb-xs-1">
                <wp-cbo-departamento data-label="{label: 'Departamento', required: false}"
                  data-ng-model="frmLugarOcurrencia.codigoDepartamentoComisaria"
                  data-set-model-by-this-key="$ctrl.frmSiniestro.codigoDepartamentoComisaria" name="nExoDepartament">
                </wp-cbo-departamento>
              </div>
              <div class="col-md-12 mb-xs-1">
                <wp-cbo-provincia data-depa="frmLugarOcurrencia.codigoDepartamentoComisaria"
                  data-label="{label: 'Provincia', required: false}"
                  data-ng-model="frmLugarOcurrencia.codigoProvinciaComisaria"
                  data-set-model-by-this-key="$ctrl.frmSiniestro.codigoProvinciaComisaria" name="nExoProvincia">
                </wp-cbo-provincia>
              </div>
              <div class="col-md-12 mb-xs-1">
                <wp-cbo-distrito data-depa="frmLugarOcurrencia.codigoDepartamentoComisaria"
                  data-label="{label: 'Distrito', required: false}"
                  data-ng-model="frmLugarOcurrencia.codigoDistritoComisaria"
                  data-prov="frmLugarOcurrencia.codigoProvinciaComisaria"
                  data-set-model-by-this-key="$ctrl.frmSiniestro.codigoDistritoComisaria" name="nExoDistrito">
                </wp-cbo-distrito>
              </div>
              <div class="col-md-12 mb-xs-1">
                <wp-cbo-comisaria data-depa="$ctrl.frmSiniestro.codigoDepartamentoComisaria"
                  data-option-default="{enterData: true}" data-dist="$ctrl.frmSiniestro.codigoDistritoComisaria"
                  data-label="{label: 'Comisaría', required: false}" data-ng-model="frmLugarOcurrencia.codigoComisaria"
                  data-prov="$ctrl.frmSiniestro.codigoProvinciaComisaria"
                  data-set-model-by-this-key="$ctrl.frmSiniestro.codigoComisaria" name="nComisaria"
                  data-array="$ctrl.changeArray(array)">
                </wp-cbo-comisaria>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <button class="g-btn second-design g-btn-verde" data-ng-click="$ctrl._showModalMap()" type="button">
              MAPA
            </button>
          </div>
        </div>
      </div> -->
    </div>

    <!-- Detalles de atención -->
    <div class="row">
      <div class="col-md-12 mb-xs-1">
        <h2 class="g-sub-title">Detalles de atención </h2>
      </div>
      <div class="col-md-4 mb-xs-2">
        <wp-cbo-lugar-atencion data-label="{label: 'Lugar de Atención', required: true}"
          data-ng-model="frmLugarOcurrencia.codigoLugarAtencion" data-option-default="{enterData: true}"
          data-set-model-by-this-key="$ctrl.frmSiniestro.codigoLugarAtencion" name="nCodigoLugarAtencion">
        </wp-cbo-lugar-atencion>
        <div class="g-error"
          data-ng-show="frmLugarOcurrencia.nCodigoLugarAtencion.$invalid && !frmLugarOcurrencia.nCodigoLugarAtencion.$pristine">
          Este campo es obligatorio
        </div>
      </div>
      <div class="col-md-8 mb-xs-2">
        <mpf-input data-ng-model="$ctrl.frmSiniestro.lugarAtencion"
          label="{label: 'Dirección de atención', required: false}" name="nLugarAtencion">
        </mpf-input>
        <div class="g-error"
          data-ng-show="frmLugarOcurrencia.nLugarAtencion.$invalid && !frmLugarOcurrencia.nLugarAtencion.$pristine">
          Este campo es obligatorio
        </div>
      </div>
      <div class="col-md-4 mb-xs-2 u-h-xs--65-55">
        <mpf-datepicker data-format="$ctrl.dateFormat" data-ng-model="frmLugarOcurrencia.fechaAtencion"
          data-ng-required="true" data-parsear-to-date="true" data-readonly="false"
          data-set-model-by-this-data="$ctrl.frmSiniestro.fechaAtencion"
          label="{label: 'Fecha de atención:', required: true}" name="nAtencionFecha">
        </mpf-datepicker>
        <div class=" g-error"
          data-ng-show="frmLugarOcurrencia.nAtencionFecha.$invalid && !frmLugarOcurrencia.nAtencionFecha.$pristine">
          Este campo es obligatorio
      </div>
    </div>
    <div class="col-md-4 mb-xs-2">
      <div class="g-input-design">
        <label class="g-placeholder ng-binding" ng-class="{animated: true}">
          Hora inicio de atención<span>*</span>
        </label>
        <input type="text" name="nAtencionInicioHora" placeholder="__:__" ng-model="$ctrl.frm.horaFinAtencion" ng-focus="ngFocus()"
          ng-required="true" ng-minlength="5" ng-pattern="$ctrl.pattern" ng-maxlength="5" ui-mask="99:99">
      </div>
      <div class="g-error" data-ng-show="frmLugarOcurrencia.nAtencionInicioHora.$invalid && !frmLugarOcurrencia.nAtencionInicioHora.$pristine">
        * Ingrese una hora válida
      </div>
    </div>
    <div class="col-md-4 mb-xs-2">
      <div class="g-input-design">
        <label class="g-placeholder ng-binding" ng-class="{animated: true}">
          Hora fin de atención<span>*</span>
        </label>
        <input type="text" name="nAtencionFinHora" placeholder="__:__" ng-model="$ctrl.frm.horaFinAtencion" ng-focus="ngFocus()"
          ng-required="true" ng-minlength="5" ng-pattern="$ctrl.pattern" ng-maxlength="5" ui-mask="99:99">
      </div>
      <div class="g-error" data-ng-show="frmLugarOcurrencia.nAtencionFinHora.$invalid && !frmLugarOcurrencia.nAtencionFinHora.$pristine">
        * Ingrese una hora válida
      </div>
    </div>
  </div>

  <!-- Conductor U.A -->
  <div class="mt-xs-3">
    <wp-person-component is-ua="true" data-conductor="$ctrl.frmSiniestro.conductor" validate-form="$ctrl.validateForm">
    </wp-person-component>
  </div>

  <!-- Datos del vehiculo -->
  <div class="row mt-xs-3">
    <div class="col-md-12 mb-xs-1">
      <h2 class="g-sub-title"> Datos del vehículo asegurado </h2>
    </div>
    <div class="col-md-12">
      <wp-vehiculo-soat is-ua="true" data-vehiculo="$ctrl.frmSiniestro.dataVehiculo" validate-form="$ctrl.validateForm">
      </wp-vehiculo-soat>
    </div>
  </div>

  <!-- Nivel de daño vehiculo -->
  <wp-nivel-danho is-ua="true" data-detalle="$ctrl.frmSiniestro.detalleDanioVehiculo[0]"
    validate-form="$ctrl.validateForm"></wp-nivel-danho>

  <div class="row">
    <div class="col-md-12 mb-xs-2 mt-xs-3">
      <mpf-input data-ng-model="$ctrl.frmSiniestro.detalleDanioVehiculo[0].descripcionDanios"
        label="{label: 'Descripcion de los daños', required: false}" name="nDescripcionDaniosUA">
      </mpf-input>
      <div class="g-error"
        data-ng-show="frmLugarOcurrencia.descripcionDanios.$invalid && !frmLugarOcurrencia.descripcionDanios.$pristine">
        Este campo es obligatorio
      </div>
    </div>
  </div>

  <div class="row mt-xs-2">
    <div class="row">
      <div class="col-md-4">
        <div class="col-md-12"><span class="g-label text-left">Lesiones del conductor</span></div>
        <div class="col-md-4s col-sm-3 col-xs-3 mt-xs-1">
          <m-radio data-ng-model="$ctrl.frmSiniestro.conductor.flagLesion" label="{label: 'Si'}"
            name="nLesionesConductor" value="1">
          </m-radio>
        </div>
        <div class="col-md-8 col-sm-3 col-xs-3 mt-xs-1">
          <m-radio data-ng-model="$ctrl.frmSiniestro.conductor.flagLesion" label="{label: 'No'}"
            name="nLesionesConductor" value="0">
          </m-radio>
        </div>
      </div>
      <div class="col-md-4">
        <div class="col-md-12"><span class="g-label text-left">Ocupantes</span></div>
        <div class="col-md-4 col-sm-3 col-xs-3 mt-xs-1">
          <m-radio data-ng-model="$ctrl.frmSiniestro.flagOcupantes" label="{label: 'Si'}" name="nOcupantes" value="1">
          </m-radio>
        </div>
        <div class="col-md-8 col-sm-3 col-xs-3 mt-xs-1">
          <m-radio data-ng-model="$ctrl.frmSiniestro.flagOcupantes" label="{label: 'No'}" name="nOcupantes" value="0">
          </m-radio>
        </div>
      </div>
      <div class="col-md-4">
        <div class="col-md-12"><span class="g-label text-left">Fallecidos</span></div>
        <div class="col-md-4 col-sm-3 col-xs-3 mt-xs-1">
          <m-radio data-ng-model="$ctrl.frmSiniestro.flagFallecidos" label="{label: 'Si'}" name="nFallecidos" value="1">
          </m-radio>
        </div>
        <div class="col-md-8 col-sm-3 col-xs-3 mt-xs-1">
          <m-radio data-ng-model="$ctrl.frmSiniestro.flagFallecidos" label="{label: 'No'}" name="nFallecidos" value="0">
          </m-radio>
        </div>
      </div>
    </div>
  </div>

  <!-- FOTOS -->
  <div class="row mt-xs-3">
    <div class="col-md-12">
      <div class="g-section-tabs mt-xs-3">
        <div class="container u-ph-0 g-overflow-hidden-xs"
          data-ng-class="{'u-msk-block': $ctrl.statusBlock.blockByAnulado}">
          <uib-tabset justified="false">
            <uib-tab class="col-md-12 col-sm-12 u-ph-0 wp-tabModal__item" index="0">
              <uib-tab-heading>
                <span>FOTOS (SOAT, Tarjeta de propiedad, Documentos de siniestros)</span>
              </uib-tab-heading>
              <div class="content-tab u-bg--gris-9">
                <div class="g-viewer-photo u-height--auto u-zi-xs--10">
                  <div class="container array-foto-box"
                    data-ng-class="{'u-msk-block': $ctrl.statusBlock.blockByAnulado}">
                    <mx-image-uploader data-nombre-img="'Otros'" data-max-photos="'15'"
                      data-on-remove="$ctrl.eliminarFotoOtros($event)" data-on-upload="$ctrl.subirFotosOtros($event)"
                      data-photos="$ctrl.documentos" data-service-photo-modal="$ctrl.servicePhotoModal($event)">
                    </mx-image-uploader>
                  </div>
                </div>
              </div>
            </uib-tab>
          </uib-tabset>
        </div>
      </div>
    </div>
  </div>


  <div class="row mt-xs-3">
    <div class="col-md-12">
      <h2 class="g-sub-title">Relato del procurador</h2>
    </div>
    <div class="col-md-12 mb-xs-2">
      <mpf-textarea data-ng-model="$ctrl.frmSiniestro.relatoProcurador"
        label="{label: 'Relato por parte del procuador', required: false}" name="nRelatoProductor">
      </mpf-textarea>
      <div class="g-error"
        data-ng-show="frmLugarOcurrencia.nRelatoProductor.$invalid && !frmLugarOcurrencia.nRelatoProductor.$pristine">
        Este campo es obligatorio
      </div>
    </div>
  </div>
</div>

</div>