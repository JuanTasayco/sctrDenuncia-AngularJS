<div class="clearfix">
  <button type="button" class="close g-close-modal" data-ng-click="vm.close()" prevent-default>
    <span class="ico-mapfre_231_cancelaroff"></span>
  </button>
  <div class="container">
    <form name="frmModalInforme" class="clearfix" data-ng-if="!vm.data.showMsgThx">
      <div class="col-lg-12">
        <div class="row"> 
          <div  class="col-md-12 g-text-center-xs mb-xs-2"
                data-ng-if="vm.data.title">
            <h2 class="gH3"><b>{{vm.data.title}}</b></h2>
          </div>
        </div>

        <div class="clearfix g-list-md g-box gBgcGray5 pt-xs-1 mb-xs-1 ng-scope">
          <ul class="clearfix g-list-md mb-xs-1">
            <li class="col-md-4 clearfix cnt-item">
              <div class="col-xs-7 item-label">
                <span class="ico-mapfre_82_circle ico-bullet"></span>Nro. carta:&nbsp;
              </div>
              <div class="col-xs-5 item-dato g-text-uppercase">
                {{vm.data.yearLetter}}-{{vm.data.letterNumber}}
              </div>
            </li>
            <li class="col-md-4 clearfix cnt-item">
              <div class="col-xs-7 item-label">
                <span class="ico-mapfre_82_circle ico-bullet"></span>Versi√≥n Carta:&nbsp;
              </div>
              <div class="col-xs-5 item-dato g-text-uppercase">
                {{vm.data.letterVersion}}
              </div>
            </li>
            <li class="col-md-4 clearfix cnt-item">
              <div class="col-xs-7 item-label">
                <span class="ico-mapfre_82_circle ico-bullet"></span>Auditoria Externa::&nbsp;
              </div>
              <div class="col-xs-5 item-dato g-text-uppercase">
                {{vm.data.externalAuditNumber}}
              </div>
            </li>
          </ul>
        </div>

        <div class="mt-xs-2 g-summary-sub-title third-design c-red">
          <div class="row">
            <div class="col-md-4">
              <h2 class="mt-xs-1">Archivos</h2>
            </div>
            <div class="col-md-8">
              <div class="col-xs-6 pr-xs-0"><a class="g-btn g-btn-white second-design block" ng-click="vm.downloadPlanilla(1)">Descargar plantilla en PDF</a></div>
              <div class="col-xs-6 pr-xs-0"><a class="g-btn g-btn-white second-design block" ng-click="vm.downloadPlanilla(2)">Descargar plantilla en WORD</a></div>
            </div>
          </div>
        </div>
        <div class="row cgw-inline-files">
            <div class="container container__attach mb-xs-3">
              <div class="cgw-attach__main_box">
                <div class="cgw-attach__wp">
                <label class="cgw-attach__box g-text-center-xs">
                    <div class="cgw-attach__box-body">
                      <p class="u-txt-weight">Adjuntar archivo</p>
                      <span class="ico-mapfre_170_archivos cgw-attach__icon u-color--gris-8"></span>
                      <input type="file" file-model="vm.myFile" ng-model="vm.files" multiple class="input__file" accept=".jpg, .bmp, .gif, .jpeg, .txt, .zip, .rar, .doc, .docx, .xls, .xlsx, .zip, application/x-rar-compressed, application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed, application/pdf,application/msword, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel"/>
                    </div>
                  </label>
                </div>
              <div class="cgw-attach__wp" ng-repeat="file in vm.filesT" ng-if="vm.filesT">
                <label class="cgw-attach__box g-text-center-xs">
                  <span class="ico-mapfre_119_wrong u-color--gris-8 style-x-arch" ng-click="vm.deleteFile($index, vm.filesT)"></span>
                  <div class="cgw-attach__box-body" uib-tooltip="{{file[0].name}}">
                    <span class="ico-mapfre_170_archivos cgw-attach__icon u-color--gris-8"></span>
                    <p class="u-txt-weight mb-xs-0 mt-xs-1 g-cut-text">{{file[0].name}}</p>
                  </div>
                </label>
              </div>
              <div class="cgw-attach__wp" ng-repeat="item in vm.filesAuditoria">
                <label class="cgw-attach__box g-text-center-xs">
                  <span class="ico-mapfre_119_wrong u-color--gris-8 style-x-arch" ng-click="vm.deleteFileAuditoria($index, vm.filesAuditoria)"></span>
                  <div class="cgw-attach__box-body" uib-tooltip="{{item.fileName}}" data-ng-click="vm.downloadAdjunto(item.fileNameLarge)">
                    <span class="ico-mapfre_170_archivos cgw-attach__icon u-color--gris-8"></span>
                    <p class="u-txt-weight mb-xs-0 mt-xs-1 g-cut-text">{{item.fileName}}</p>
                  </div>
                </label>
              </div>
            </div>
              
          </div>
        </div>
        <div class="mt-xs-2 g-summary-sub-title third-design c-red" ng-hide="vm.data.rolConsultaCGW">
          <div class="row">
            <div class="col-md-12">
              <h2 class="mt-xs-1">Comentarios</h2>
            </div>
          </div>
        </div>
        <div class="row mb-xs-2" ng-hide="vm.data.rolConsultaCGW">
          <div class="col-md-12">
            <mpf-textarea label="{label: 'Inserte Comentario', required: true}" ng-required="true" name="nMensaje" ng-model="vm.data.comment"></mpf-textarea>
            <div class="g-error"
               data-ng-show="frmModalInforme.nMensaje.$error.required && !frmModalInforme.nMensaje.$pristine">* Ingrese comentarios
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-10 col-lg-offset-1 u-ph-0 g-text-center-xs">
        <div  class="col-xs-12 col-md-4 u-float-center" ng-hide="vm.data.rolConsultaCGW">
          <button type="button"
                  class="g-btn col-xs-12 mt-xs-1 g-btn-transparent"
                  data-ng-click="vm.saveInformeAuditoria()" prevent-default>
            Guardar
          </button>
        </div>
         <div  class="col-xs-12 col-md-4 u-float-center" ng-hide="vm.data.rolConsultaCGW">
          <button type="button"
                  class="g-btn col-xs-12 mt-xs-1 g-btn-verde"
                  data-ng-click="vm.finishInformeAuditoria()" prevent-default>
            Finalizar Informe
          </button>
        </div>
      </div>
    </form>
    <div  class="clearfix g-text-center-xs"
          data-ng-if="vm.data.showMsgThx">
      <span class="ico-mapfre_142_sucess u-txt-70 mb-xs-2 u-color--verde-1 u-inline"></span>
      <div class="clearfix">
        <div  class="col-xs-12 g-text-center-xs g-title-modal g-sub-title c-black"
              data-ng-if="vm.data.txtThx"
              data-ng-bind-html="vm.data.txtThx">
        </div>
      </div>
      <div  class="clearfix mt-xs-2"
            data-ng-if="vm.data.showBtnThx">
        <div  class="col-xs-12 col-md-6 col-md-offset-3">
          <a  class="g-btn g-btn-verde block"
              data-ng-click="vm.close()">{{vm.data.txtBtnThx}}</a>
        </div>
      </div>
    </div>
  </div>
</div>

<form id="frmInformeAuditoriaExt" name="frmInformeAuditoriaExt" action="{{vm.informeAuditoriaExtURL}}" method="post" target="_blank">
  <input type="hidden" name="json" value='{{vm.downloadFile}}'>
</form>

<form id="frmFileuditoriaExt" name="frmFileuditoriaExt" action="{{vm.fileAuditoriaExtURL}}" method="post" target="_blank">
  <input type="hidden" name="json" value='{{vm.downloadAtachFile}}'>
</form>