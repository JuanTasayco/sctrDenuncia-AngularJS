<mfloader loader="$ctrl.loader"></mfloader>
<div class="container">
  <mfbreadcrumb panel= "$ctrl.panel"
                lvl0="$ctrl.lvl0"
                lvl1=""
                lvl2=""
                show-lvl1= ""
                show-lvl2= ""
                open-map=""
                loader="$ctrl.loader"
                lst-dptos=""></mfbreadcrumb>

  <div class="row register-pacient-step">
    <div class="col-xs-12 col-md-5">
      <div class="cleaner">
        <h1 class="title-r u-title-divider--up" data-ng-bind="::$ctrl.title"></h1>
      </div>
    </div>
    <div class="col-xs-12 col-md-7">
      <mfstep step="$ctrl.currentStep"></mfstep>
    </div>
  </div>
  <div class="u-bar-volver u-mb-20">
    <div class="container">
      <div class="row u-align-v">
        <div class="col-xs-12 col-md-3">
          <a ui-sref="referencia.panel.registro.origen" class="u-arrow-left">Volver</a>
        </div>
      </div>
    </div>
  </div>
  <div class="row" id="print">
    <div class="registro-receip--content col-md-offset-2 col-md-9 col-xs-12">
      <div class="cleaner">
        <div class="col-xs-12 u-mb-50 no-print" id="rmSolicitud">
          <div class="cleaner">
            <h3 class="text-center registro-receip-request">
              <span class="registro-receip-request--check ico-mapfre_81_checkmark"></span>
              <span class="registro-receip-request--title">SOLICITUD GENERADA CORRECTAMENTE</span>
              <form id="frmDownloadPDF"
                    name="frmDownloadPDF"
                    action="{{$ctrl.pdfURL}}"
                    method="post"
                    target="_blank">
                <input type="hidden" name="json" value='{{$ctrl.dataToPdf}}'>
                <button class="c-link"
                        type="submit">
                  <span class="u-inline-b">
                    <span class="">
                      <span>Descargar PDF</span>
                    </span>
                  </span>
                </button>
              </form>
            </h3>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="cleaner">
            <span class="registro-receip__sub-title text-center">DATOS DE LA REFERENCIA</span>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="cleaner">
            <div class="register-progress-block lista__item--card u-br-5 u-pvh-20">
              <ul>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Nro de referencia: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.notas.idReferencia}}</span>
                </li>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Fecha y hora: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.notas.dateRegistro}}</span>
                </li>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Usuario: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.currentUser}}</span>
                </li>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Tipo de referencia: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.origen.origenReferencia.nombre}}</span>
                </li>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Producto: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.paciente.asegurado.producto}}</span>
                </li>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Diagnóstico Presuntivo: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.paciente.diagnostico}}</span>
                </li>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Condición del paciente: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.paciente.condicion}}</span>
                </li>
                <li class="u-mb-10 cleaner">
                  <span class="col-xs-12 col-sm-4">Observaciones: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.notas.obs}}</span>
                </li>
                <li class="u-mb-0 cleaner">
                  <span class="col-xs-12 col-sm-4">Requerimientos en destino: </span>
                  <span class="col-xs-12 col-sm-8">{{::$ctrl.notas.requerimientos}}</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="cleaner">
            <span class="registro-receip__sub-title text-center">DATOS DEL ASEGURADO</span>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="cleaner">
            <div  class="register-progress-block lista__item--card u-br-5 lista__item"
                  data-ng-init="item = $ctrl.paciente.asegurado; titular = $ctrl.paciente.titular;">
              <div class="register-progress-block-info u-mb-15 u-pt-20">
                <p class="registro-receip--title">
                  DATOS DEL TITULAR
                </p>
                <span class="u-color-verde">
                  <b>{{::titular.name}}</b>
                </span>
                <ul class="u-mt-10 u-fx-as row">
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Número del contrato: {{::titular.contrato}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-6">
                    <span>Contratante: {{::titular.empresa}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>RUC: {{::titular.ruc}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Tipo de afiliación: {{::titular.tipo_afiliacion}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Fecha de afiliación: {{::titular.fec_afiliacion | date:'dd/MM/yyyy'}}</span>
                  </li>
                </ul>
              </div>
              <div class="register-progress-block-info">
                <p class="registro-receip--title">
                  DATOS DEL ASEGURADO
                </p>
                <span class="u-color-verde">
                  <b>{{::item.name}}</b>
                </span>
                <ul class="u-mt-10 u-fx-as row">
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>{{::item.tipodocumento}}: {{::item.dni}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Fecha de nacimiento: {{::item.fnac | date:'dd/MM/yyyy'}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Género: {{::item.gen}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Parentesco: {{::item.parentesco}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-6">
                    <span>Compañía: {{::item.company}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Producto: {{::item.producto}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 col-sm-6 col-md-3">
                    <span>Estado: {{::item.estado}}</span>
                  </li>
                </ul>
              </div>
              <div class="registro-receip--border">
                <ul class="u-mt-10 row">
                  <li class="lista-body__item col-xs-12">
                    <span>Diagnóstico Presuntivo: {{::$ctrl.paciente.diagnostico}}</span>
                  </li>
                  <li class="lista-body__item col-xs-12 u-mb-0">
                    <span>Condición del paciente: {{::$ctrl.paciente.condicion}}</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="cleaner">
            <span class="registro-receip__sub-title text-center u-mb-20">ENTIDAD DE ORIGEN</span>
          </div>
        </div>
        <div class="col-xs-12">
          <ul class="lista-group u-br-5 ">
            <li class="lista__item lista__item--card lista__item--prov">
              <div class="lista__header reg-receipt__header register-destination__header u-mt-20">
                <div class="u-align-v">
                  <span class="lista-title__ico ico-mapfre_34_salud hidden-xs hidden-sm"></span>
                  <p class="lista-title__txt register-destination__clinic">{{::$ctrl.origen.centro}}</p>
                  <p class="panel__caption panel__caption--ubi register-destination--caption">{{::$ctrl.origen.provincia.nombre}} - {{::$ctrl.origen.departamento.nombre}}</p>
                </div>
              </div>
              <div class="lista-body__wp register-destination__content">
                <div class="cleaner">
                  <h4 class="register-preview__sub-title">Responsable de la referencia</h4>
                  <div class="col-xs-12 col-sm-6 col-md-4 u-mt-10">
                    <div class="row">
                      <p class="u-mb-0">Nombre completo</p>
                      <p>{{::$ctrl.origen.responsable}}</p>
                    </div>
                  </div>
                  <div class="col-xs-12 col-sm-6 col-md-4 u-mt-10">
                    <div class="row">
                      <p class="u-mb-0">Teléfono</p>
                      <p>{{::$ctrl.origen.tel}}</p>
                    </div>
                  </div>
                  <div class="col-xs-12 col-sm-6 col-md-4 u-mt-10">
                    <div class="row">
                      <p class="u-mb-0">Dirección correo electrónico</p>
                      <p>{{::$ctrl.origen.mail}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <div class="col-xs-12">
          <div class="cleaner">
            <span class="registro-receip__sub-title text-center u-mb-20">ENTIDAD DE DESTINO</span>
          </div>
        </div>
        <div class="col-xs-12">
          <div class="cleaner">
            <li class="lista__item lista__item--card lista__item--prov"
                data-ng-repeat="item in ::$ctrl.proveedores track by $index"
                data-ng-init="rowIndex = item.id">
              <div class="lista__header register-destination__header">
                <div class="lista-header__col col-xs-12 col-md-8 u-align-v">
                  <span class="lista-title__ico ico-mapfre_34_salud hidden-xs hidden-sm"></span>
                  <p class="lista-title__txt register-destination__clinic">{{::item.nombre}}</p>
                  <p class="panel__caption panel__caption--ubi register-destination--caption">{{::item.departamento}}
                  <span data-ng-if="item.provincia">, </span> {{::item.provincia}}</p>
                </div>
                <div class="lista-header__col col-xs-12 col-md-4 u-align-v no-print">
                  <a  class="u-arrow-right register-destination__link-more"
                      data-ng-click="$ctrl.openClientProveedoresDetailModal(item)"><b>Ver Cobertura</b></a>
                </div>
              </div>
              <div class="lista-body__wp register-destination__content">
                <ul class="lista__body register-destination__content--list">
                  <li class="lista-body__item lista-body__item--prov" data-ng-if="item.categoria">{{::item.categoria}}</li>
                  <li class="lista-body__item lista-body__item--prov" data-ng-if="item.entidad">{{::item.entidad}}</li>
                  <li class="lista-body__item lista-body__item--prov" data-ng-if="item.convenioStr">{{::item.convenioStr}}</li>
                  <li class="lista-body__item lista-body__item--prov no-print">
                    <a  data-ng-click="$ctrl.verDetalleProveedor(item)">
                      <b>Ver detalle</b>
                    </a>
                  </li>
                </ul>
                <ul class="lista__body register-destination__content--list reg-car__info-user u-mb-0">
                  <li class="lista-body__item lista-body__item--prov" data-ng-if="item.telefono_Responsable">{{::item.telefono_Responsable}}</li>
                  <li class="lista-body__item lista-body__item--prov" data-ng-if="item.nombre_Responsable">{{::item.nombre_Responsable}}</li>
                  <li class="lista-body__item lista-body__item--prov" data-ng-if="item.direccion_Establecimiento">{{::item.direccion_Establecimiento}}</li>
                </ul>
                <a  class="reg-card__showMap no-print" id="rmVerMapa"
                    data-ng-if="item.latitud && item.longitud"
                    data-ng-click="$ctrl.toggleMap(rowIndex, item)">
                  <b>Ver Mapa</b>
                </a>
              </div>
              <div  class="provee__map animate-show no-print ng-hide" id="rmMapa"
                    data-ng-show="$ctrl.mapShow[rowIndex]">
                <ng-map zoom="15"
                        id="{{::item.id}}"
                        center="{{item.latitud}},{{item.longitud}}"
                        class="referencia-map"
                        lazy-init="true">
                  <marker position="{{item.latitud}},{{item.longitud}}"
                    title="{{::item.nom}}"
                    animation="Animation.DROP"
                    centered="true"></marker>
                </ng-map>
              </div>
            </li>
          </div>
        </div>
        <div  class="col-xs-12"
              data-ng-if="::$ctrl.areThereServicios()">
          <span class="registro-receip__sub-title text-center u-mb-20">REQUERIMIENTOS DE DESTINO</span>
          <ul class="lista-group u-br-5">
            <li class="lista__item lista__item--card lista__item--prov reg-card-resumen">
              <div data-ng-if="::$ctrl.filtrosDestino.servicios">
                <div class="lista__header reg-resumen__header">
                  <h4 class="register-preview__block-title">Servicios</h4>
                </div>
                <div class="lista-body__wp reg-resumen__box cleaner">
                  <div  class="col-xs-12 col-sm-6 col-md-4 u-ph-0"
                        data-ng-repeat="item in ::$ctrl.filtrosDestino.servicios track by $index">
                    <p class="u-mb-0">{{::item.nombre}}</p>
                  </div>
                </div>
              </div>
              <div data-ng-if="::$ctrl.filtrosDestino.serviimagenes">
                <div class="lista__header reg-resumen__header">
                  <h4 class="register-preview__block-title">Imagenología</h4>
                </div>
                <div class="lista-body__wp reg-resumen__box cleaner">
                  <div  class="col-xs-12 col-sm-6 col-md-4 u-ph-0"
                        data-ng-repeat="item in ::$ctrl.filtrosDestino.serviimagenes track by $index">
                    <p class="u-mb-0">{{::item.nombre}}</p>
                  </div>
                </div>
              </div>
              <div data-ng-if="::$ctrl.filtrosDestino.serviemergencias">
                <div class="lista__header reg-resumen__header">
                  <h4 class="register-preview__block-title">Emergencias</h4>
                </div>
                <div class="lista-body__wp reg-resumen__box cleaner">
                  <div  class="col-xs-12 col-sm-6 col-md-4 u-ph-0"
                        data-ng-repeat="item in ::$ctrl.filtrosDestino.serviemergencias track by $index">
                    <p class="u-mb-0">{{::item.nombre}}</p>
                  </div>
                </div>
              </div>
              <div data-ng-if="::$ctrl.filtrosDestino.serviambulancias">
                <div class="lista__header reg-resumen__header">
                  <h4 class="register-preview__block-title">Ambulancias</h4>
                </div>
                <div class="lista-body__wp reg-resumen__box cleaner">
                  <div  class="col-xs-12 col-sm-6 col-md-4 u-ph-0"
                        data-ng-repeat="item in ::$ctrl.filtrosDestino.serviambulancias track by $index">
                    <p class="u-mb-0">{{::item.nombre}}</p>
                  </div>
                </div>
              </div>
              <div data-ng-if="::$ctrl.filtrosDestino.especialidades">
                <div class="lista__header reg-resumen__header">
                  <h4 class="register-preview__block-title">Especialidades</h4>
                </div>
                <div class="lista-body__wp reg-resumen__box cleaner">
                  <div  class="col-xs-12 col-sm-6 col-md-4 u-ph-0"
                        data-ng-repeat="item in ::$ctrl.filtrosDestino.especialidades track by $index">
                    <p class="u-mb-0">{{::item.nombre}}</p>
                  </div>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <div class="col-xs-12 u-txt-center u-mb-50 no-print" id="rmIrReporte">
          <a  class="c-btn btn btn--secundary"
              ui-sref="referencia.panel.reportes">
            IR A REPORTES DE REFERENCIAS
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
